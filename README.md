# App Builder Widget

Adds a custom Widget that integrates an Adobe App Builder App into the Commerce frontend. This is meant to cover the most common scenerios, and can be customized to add features as needed. 

#### Usage
Add like any other widget type either defined under `Content->Widgets` or added in Blocks or Pages. It uses the .css file available from App Builder, but additional css may be needed in the context of the Commerce UI and themes and customizations.

#### Widget Options

*Url To .js file* - URL to main .js file for the application. 

*Url to .css file* - URL to .css file generated by App Builder.

**Data To Expose to the App** - Select the types of data that will be written into the DOM to be made available to the application
- *Current Product Id* - Id of a product if you are on a product display page
- *Current Product Sku* - Sku of a product if you are on a product display page
- *Current Cagetory Id* - Id of a category if you are on a category or product listing page
- *Logged In Customer Id* - Id of a logged in customer
- *Customer Cart Id* - Id of a Cart/Quote if it exists
- *Store view Id* 
- *Store view code*

#### Using Data in your application
A `<div id="root">` tag is written that can be accessed within the application.  e.g `dataDiv = document.getElementById("root");`
That `div` can contain multiple attributes that can hold commerce data that can be accessed by the application. e.g `dataDiv.getAttribute("data-base-url")`
Attribtues are written to the `div` based on the options selected when the widget was defined, with the exception of `data-base-url` which is the default Base URL of the commerce instance and is always available

**Available Data Attributes**

`data-base-url`
`data-product-id`
`data-product-sku`
`data-category-id`
`data-store-id`
`data-store-code`
`data-cart-id`
`data-customer-id`

#### Content Security Policies (CSP) 
Domains have been added to the whitelist for script-src and style-src in `etc/csp_whitelist.xml`
Other required domains can be added here, or can be implemente by other methods
[https://developer.adobe.com/commerce/php/development/security/content-security-policies/](https://developer.adobe.com/commerce/php/development/security/content-security-policies/ "https://developer.adobe.com/commerce/php/development/security/content-security-policies/")
